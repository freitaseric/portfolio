---
import { actions } from "astro:actions";
import { siteConfig } from "../config/site";

const {data, error} = await Astro.callAction(actions.github.getUserData, {})
---

<div class="github-avatar">
    <div class="avatar mb-8">
        <div class="size-36 rounded-full ring ring-white/30 ring-offset-4 ring-offset-primary mx-auto overflow-hidden">
            {error ? (
                <!-- Fallback para imagem local -->
                <img src="/avatar.jpg" alt="Avatar Fallback" class="w-full h-full object-cover" />
            ) : (
                <!-- Avatar do GitHub -->
                <img 
                    src={data?.avatar_url} 
                    alt={`${data?.name} - Avatar do GitHub`} 
                    class="w-full h-full object-cover"
                    loading="lazy"
                />
            )}
        </div>
    </div>
    
    {data && !error && (
        <div class="text-center mb-4">
            <div class="flex justify-center space-x-6 text-white/80 mb-4">
                <div class="text-center">
                    <div class="text-lg font-semibold">{data.followers}</div>
                    <div class="text-sm text-white/60">Followers</div>
                </div>
                <div class="text-center">
                    <div class="text-lg font-semibold">{data.public_repos}</div>
                    <div class="text-sm text-white/60">Repos</div>
                </div>
            </div>
            {data.bio && (
                <p class="text-white/80 text-sm max-w-md mx-auto mb-4">
                    "{data.bio}"
                </p>
            )}
        </div>
    )}
</div>

<style>
    .github-avatar img {
        transition: transform 0.3s ease;
    }
    
    .github-avatar img:hover {
        transform: scale(1.05);
    }
    
    @media (max-width: 768px) {
        .github-avatar .avatar {
            margin-bottom: 2rem;
        }
    }
</style>
